<div mat-dialog-content class="mat-dialog-content">
  <mat-horizontal-stepper class="mat-horizontal-stepper">
    <!-- STEP 1 : Jobsite creation -->
    <mat-step [stepControl]="form" class="mat-step">
      <ng-template matStepLabel>Create a jobsite</ng-template>

      <form [formGroup]="form">
        <!-- Jobsite name -->
        <div>
          <mat-form-field
            appearance="outline"
            MatFormFieldControl="jobsite_name"
          >
            <mat-label>Name *</mat-label>
            <input matInput formControlName="jobsite_name" />
          </mat-form-field>
        </div>

        <!-- Jobsite address -->
        <div>
          <mat-form-field
            appearance="outline"
            MatFormFieldControl="jobsite_address"
            class="w-75"
          >
            <mat-label>Address *</mat-label>
            <input matInput formControlName="jobsite_address" />
          </mat-form-field>
          <button mat-raised-button color="primary" class="ms-2">Search</button>
        </div>

        <!-- Map displayer -->
        <div class="map-container">
          <div id="map" class="map"></div>
          <p>Lattitude : {{ lattitude }} -- Longitude : {{ longitude }}</p>
        </div>

        <!-- Jobsite description -->
        <div>
          <mat-form-field
            appearance="outline"
            MatFormFieldControl=""
            class="w-100"
          >
            <mat-label>Description</mat-label>
            <textarea matInput formControlName="jobsite_description"></textarea>
          </mat-form-field>
        </div>
      </form>

      <div class="d-flex justify-content-around">
        <button mat-button matStepperNext>Next</button>
      </div>
    </mat-step>

    <!-- STEP 2 : Concrete casting -->
    <mat-step [stepControl]="form" class="mat-step">
      <ng-template matStepLabel>Create concrete casting</ng-template>

      <form [formGroup]="form">
        <button
          mat-raised-button
          color="primary"
          (click)="addConcreteCasting()"
        >
          Add
        </button>
        <!-- each casting-->
        <div
          formArrayName="jobsite_castings"
          class="form-group py-2"
          *ngFor="let area of getCastingsControls.controls; let i = index"
        >
          <div class="d-flex justify-content-between">
            <h1>Casting {{ i + 1 }}</h1>
            <button
              mat-fab
              color="warn"
              [disabled]="isLastArea()"
              (click)="removeConcreteCasting(i)"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </div>
          <div [formGroupName]="i">
            <div>
              <mat-form-field appearance="outline" MatFormFieldControl="">
                <mat-label>Name*</mat-label>
                <input matInput formControlName="casting_name" />
              </mat-form-field>
            </div>
            <div>
              <mat-form-field
                appearance="outline"
                MatFormFieldControl=""
                class="w-100"
              >
                <mat-label>Description</mat-label>
                <textarea
                  matInput
                  formControlName="casting_description"
                ></textarea>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field
                appearance="outline"
                MatFormFieldControl=""
                class="w-100"
              >
                <mat-label>Infos*</mat-label>
                <textarea matInput formControlName="casting_infos"></textarea>
              </mat-form-field>
            </div>
          </div>
        </div>
      </form>
      <div class="d-flex justify-content-around">
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </div>
    </mat-step>

    <!-- STEP 3 : Overview -->
    <mat-step class="mat-step">
      <ng-template matStepLabel>Overview</ng-template>

      <mat-grid-list cols="2" rowHeigth="2:1">
        <mat-grid-tile [colspan]="2">
          <mat-grid-tile-header>Jobsite</mat-grid-tile-header>
          <div class="jobsiteGridContent">
            <p>Jobsite name:</p>
            <p>Jobsite address :</p>
            <p>Jobsite description:</p>
            <p>coordinates:[{{ lattitude }} , {{ longitude }}]</p>
          </div>
        </mat-grid-tile>
      </mat-grid-list>

      <mat-grid-list cols="2" rowHeigth="fit" gutterSize="3px">
        <mat-grid-tile
          *ngFor="let casting of getCastingsControls.controls; let i = index"
        >
          <mat-grid-tile-header>Casting {{ i + 1 }}</mat-grid-tile-header>
          <div>
            <p>Name:{{ getCasting(i, "casting_name") }}</p>
            <p>Description:{{ getCasting(i, "casting_description") }}</p>
            <p>Infos:{{ getCasting(i, "casting_infos") }}</p>
          </div>
        </mat-grid-tile>
      </mat-grid-list>

      <div class="d-flex justify-content-around">
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button (click)="onSubmit()">Create</button>
      </div>
    </mat-step>
  </mat-horizontal-stepper>
  <p>* : required fields</p>
</div>
