<div mat-dialog-content class="mat-dialog-content">
  <mat-stepper class="mat-horizontal-stepper">
    <!-- STEP 1 : Jobsite creation -->
    <mat-step [stepControl]="form">
      <ng-template matStepLabel>Create a jobsite</ng-template>
      <mat-hint>required fields* </mat-hint>

      <form [formGroup]="form">
        <!-- Jobsite name -->
        <div>
          <mat-form-field
            appearance="outline"
            MatFormFieldControl="jobsite_name"
          >
            <mat-label>Name *</mat-label>
            <input matInput formControlName="jobsite_name" id="jobsite_name" />
          </mat-form-field>
        </div>

        <!-- Jobsite address -->
        <div>
          <mat-form-field
            MatFormFieldControl="jobsite_address"
            appearance="outline"
            class="w-75"
          >
            <mat-label>Address *</mat-label>
            <input
              matInput
              formControlName="jobsite_address"
              id="jobsite_address"
            />
            <mat-hint
              >Enter the address and click "search" to get the coordinates ...
              or click on the map to get the coordinates but you still have to
              enter an addres without clicking on the button</mat-hint
            >
          </mat-form-field>
          <button
            mat-raised-button
            color="primary"
            class="ms-2"
            (click)="getCoordinateFromAddress()"
          >
            Search
          </button>
        </div>

        <!-- Map displayer -->
        <div class="map-container pt-2">
          <div id="map" class="map"></div>
          <p>Lattitude : {{ lattitude }} -- Longitude : {{ longitude }}</p>
        </div>

        <!-- Jobsite description -->
        <div>
          <mat-form-field
            appearance="outline"
            MatFormFieldControl="jobsite_description"
            class="w-100"
          >
            <mat-label>Description</mat-label>
            <textarea
              matInput
              formControlName="jobsite_description"
              id="jobsite_description"
            ></textarea>
          </mat-form-field>
        </div>
      </form>

      <div class="d-flex justify-content-around">
        <button mat-button matStepperNext>Next</button>
      </div>
    </mat-step>

    <!-- STEP 2 : Concrete casting -->
    <mat-step [stepControl]="form">
      <ng-template matStepLabel>Create concrete casting</ng-template>
      <mat-hint>required fields* </mat-hint>

      <form [formGroup]="form">
        <button
          mat-raised-button
          color="primary"
          (click)="addConcreteCasting()"
        >
          Add
        </button>
        <!-- each casting-->
        <div
          formArrayName="jobsite_castings"
          class="form-group py-2"
          *ngFor="let area of getCastingsControls.controls; let i = index"
        >
          <div class="d-flex justify-content-between">
            <h1>Casting {{ i + 1 }}</h1>
            <button
              mat-fab
              color="warn"
              [disabled]="isLastArea()"
              (click)="removeConcreteCasting(i)"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </div>
          <div [formGroupName]="i">
            <div>
              <mat-form-field appearance="outline" MatFormFieldControl="">
                <mat-label>Name*</mat-label>
                <input
                  matInput
                  formControlName="casting_name"
                  id="casting_name"
                />
              </mat-form-field>
            </div>
            <div>
              <mat-form-field
                appearance="outline"
                MatFormFieldControl=""
                class="w-100"
              >
                <mat-label>Description</mat-label>
                <textarea
                  matInput
                  formControlName="casting_description"
                  id="casting_description"
                ></textarea>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field
                appearance="outline"
                MatFormFieldControl=""
                class="w-100"
              >
                <mat-label>Infos*</mat-label>
                <textarea
                  matInput
                  formControlName="casting_infos"
                  id="casting_infos"
                ></textarea>
              </mat-form-field>
            </div>
          </div>
        </div>
      </form>
      <div class="d-flex justify-content-around">
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </div>
    </mat-step>

    <!-- STEP 3 : Overview -->
    <mat-step>
      <ng-template matStepLabel>Overview</ng-template>

      <mat-grid-list cols="2" rowHeigth="2:1">
        <mat-grid-tile [colspan]="2">
          <mat-grid-tile-header>Jobsite</mat-grid-tile-header>
          <div class="jobsiteGridContent" id="jobsite_overview">
            <p>Jobsite name : {{ getJobsite("jobsite_name") }}</p>
            <p>Jobsite address : {{ getJobsite("jobsite_address") }}</p>
            <p>Jobsite description : {{ getJobsite("jobsite_description") }}</p>
            <p>coordinates : [{{ lattitude }} , {{ longitude }}]</p>
          </div>
        </mat-grid-tile>
      </mat-grid-list>

      <mat-grid-list cols="2" rowHeigth="fit" gutterSize="3px">
        <mat-grid-tile
          *ngFor="let casting of getCastingsControls.controls; let i = index"
        >
          <mat-grid-tile-header>Casting {{ i + 1 }}</mat-grid-tile-header>
          <div id="castings_overview">
            <p>Name:{{ getCasting(i, "casting_name") }}</p>
            <p>Description:{{ getCasting(i, "casting_description") }}</p>
            <p>Infos:{{ getCasting(i, "casting_infos") }}</p>
          </div>
        </mat-grid-tile>
      </mat-grid-list>

      <div class="d-flex justify-content-around">
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button (click)="onSubmit()" id="submit">Create</button>
      </div>
    </mat-step>
  </mat-stepper>
</div>
